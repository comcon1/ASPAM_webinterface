# Обработка данных спонтанной физиологической активности ASPAM

По окончании эксперимента, исследователь получает CSV файл следующего формата:

    # timestamp n1 n2 n3
    151245423   2  0  1
    151245428   0  1  0
    151245433   1  1  0
    ...

В файле выписано количество полуоборотов, которые каждая крыса провернула за каждый 5-секундный интервал в периоде наблюдения. По результатам многодневного наблюдения создается огромный текстовый файл, информацию из которого необходимо извлекать особым образом.

## Установка необходимых скриптов

Установите всю библиотеку ASPAM_webinterface таким образом, чтобы она была готова к работе в режиме сервера. Смотрите подробнее файлы README и INSTALL в соответствующих подкаталогах.

## Этапы обработки

**1. Разделение на отдельные файлы**
На первом этапе необходимо извлечь данные каждой крысы в отдельные файлы. Это делается при помощи скрипта `extract-rat.py`.

При этом необходимо указать:
* `-f` исходный файл
* `-i` дату начала анализа
* `-t` время начала анализа (лучше ставить такое же, как время начала дня)
* `-n` количество дней анализа
* `-c` номер канала
* `-o` выходной файл

    ./extract-rat.py -f data/data00.xvg -i 23.10.2019 \
       -t 7:55 -n 22 -c 2 -o stat/con42.xvg

**2. Извлечение подневной статистики**
Подневная статистика требует, чтобы вы корректно указывали параметры светового режима.

    ./get-dn-averages.py -i stat/con42.xvg -o stat/con42_stat.xvg -d 7:55 -n 19:55
    
Мы указали время включения света (`-d`) и выключения (`-n`).

В результате работы данная программа генерирует CSV файл с разделителем "|", который подходит для импорта программами MS Excel/OO Calc. В файле сведены показатели для каждого дня и ночи внутри заданных временных рамок. 

**3. Построение распределений по 5-секундным интервалам**
Данный скрипт строит распределения скорости по 5-секундным интервалам в ночное время. При этом данные должны быть записаны с частотой в 5 секунд.

Пример запуска:
`drawh5sec.py -i rat.xvg -o rat5h.pdf -d 9:00 -n 20:53`

Здесь также важно корректно указать время включения и выключения света. Программа в результате выдает рисунок и данные распределения скорости, усредненные по всем ночным периодам внутри каждой недели наблюдения. 

*... to be continued*
